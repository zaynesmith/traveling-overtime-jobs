generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  id           String   @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  email        String   @unique
  passwordHash String   @map("passwordhash")
  role         String   @default("jobseeker")

  createdAt    DateTime @default(now()) @map("created_at") @db.Timestamp(6)
  updatedAt    DateTime @updatedAt @map("updated_at") @db.Timestamp(6)

  employerProfile  EmployerProfile?
  jobseekerProfile JobseekerProfile?

  @@map("user")
}

model EmployerProfile {
  id           String    @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  companyName  String
  officePhone  String?
  mobilePhone  String?
  address1     String?
  address2     String?
  city         String?
  state        String?
  zip          String?
  website      String?
  timezone     String?
  firstName    String?
  lastName     String?
  phone        String?
  location     String?
  notes        String?
  completedAt  DateTime? @db.Timestamp(6)
  userId       String    @unique @db.Uuid

  user         User      @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("employerprofile")
}

model JobseekerProfile {
  id        String  @id @default(dbgenerated("gen_random_uuid()")) @db.Uuid
  firstName String?
  lastName  String?
  email     String?
  address1  String?
  address2  String?
  city      String?
  state     String?
  zip       String?
  trade     String?
  resumeUrl String?
  userId    String? @unique @db.Uuid

  user      User?   @relation(fields: [userId], references: [id], onDelete: Cascade)

  @@map("jobseekerprofile")
}
